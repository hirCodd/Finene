import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as i,c as p,b as s,d as n,e as t,f as a}from"./app-9b1c5904.js";const l={},u=a(`<h2 id="说明" tabindex="-1"><a class="header-anchor" href="#说明" aria-hidden="true">#</a> 说明</h2><p>本教程是基于 WebStack-Hugo 静态响应式网址导航主题，可以打造的的个人定制版本。</p><h2 id="_1-安装hugo并且拷贝主题" tabindex="-1"><a class="header-anchor" href="#_1-安装hugo并且拷贝主题" aria-hidden="true">#</a> 1.安装hugo并且拷贝主题</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/shenweiyan/NavBioIT.git
$ <span class="token function">rename</span> NavBioIT mysite <span class="token comment"># 重命名为你的仓库名称</span>
$ <span class="token builtin class-name">cd</span> mysite
$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> .git <span class="token comment"># 删除原来的git仓库</span>
$ <span class="token function">git</span> init <span class="token comment"># 初始化新的git仓库</span>
$ <span class="token builtin class-name">cd</span> themes/WebStack-Hugo
$ <span class="token function">git</span> clone https://github.com/shenweiyan/WebStack-Hugo.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行完成上述操作，你的个人导航工具就已经在本地初始化完成了，接下来就是修改hugo-action,触发github action自动部署到github pages或者vercel。</p><h2 id="_2-修改hugo-action的配置部署到github-pages" tabindex="-1"><a class="header-anchor" href="#_2-修改hugo-action的配置部署到github-pages" aria-hidden="true">#</a> 2.修改hugo-action的配置部署到github pages</h2><h2 id="_2-1-修改hugo-action的配置" tabindex="-1"><a class="header-anchor" href="#_2-1-修改hugo-action的配置" aria-hidden="true">#</a> 2.1 修改hugo-action的配置</h2><p>在<code>mysite</code>目录下的<code>.github/workflows</code>目录，可以创建或者使用原来的<code>HugoAction.yml</code>触发github action自动部署到github pages或者vercel。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Hugo Actions <span class="token comment"># 名字自取</span>

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">schedule</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">cron</span><span class="token punctuation">:</span> <span class="token string">&#39;0 1 * * *&#39;</span> <span class="token comment"># 定时拉取原来的主题，如果不需要可以删除</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main  <span class="token comment"># 这里的意思是当 main 分支发生 push 的时候，运行下面的 jobs</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">bot</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Fetch
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          # 同步原作者主题
          cd themes/WebStack-Hugo
          git pull origin main
          echo &quot;fetch done&quot;</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span> 
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest	<span class="token comment"># 在什么环境运行任务</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3   <span class="token comment"># 引用actions/checkout这个action，与所在的github仓库同名</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
         <span class="token key atrule">submodules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># Fetch Hugo themes (true OR recursive) 获取submodule主题</span>
         <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token comment"># Fetch all history for .GitInfo and .Lastmod</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Hugo	<span class="token comment"># 步骤名自取</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>hugo@v2	<span class="token comment"># hugo官方提供的action，用于在任务环境中获取hugo</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">hugo-version</span><span class="token punctuation">:</span> <span class="token string">&#39;0.59.0&#39;</span>	<span class="token comment"># 获取指定版本的hugo</span>
          <span class="token comment"># extended: true</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build 
        <span class="token comment">#run: hugo --minify	# 使用 hugo 构建静态网页</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> hugo         	<span class="token comment"># 使用 hugo 构建静态网页</span>
        
        <span class="token comment">###### 以下两种方案任选一种即可</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy To Pages           <span class="token comment"># 部署至当前仓库的其他分支</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3	<span class="token comment"># 一个自动发布github pages的action</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">external_repository</span><span class="token punctuation">:</span> shenweiyan/NavBioIT	<span class="token comment"># 发布到哪个repo</span>
          <span class="token key atrule">personal_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.PERSONAL_ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment">#1. 创建 Personal_Access_Token：</span>
          <span class="token comment">#   GitHub 个人账号 -&gt; Settings -&gt; Developer settings -&gt; Personal access tokens -&gt;  Tokens (classic) -&gt; New personal access token (classic)</span>
          <span class="token comment">#   - Expiration: No expiration</span>
          <span class="token comment">#   - Select scopes: 全选</span>
          <span class="token comment">#2. 粘贴 Personal_Access_Token：</span>
          <span class="token comment">#   进入目标 repo -&gt; Settings -&gt; Security -&gt; Secrets and variables -&gt; Actions，选择 New repository secret -&gt; 粘贴前面生成的 personal_access_token</span>
          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./public
          <span class="token comment">#注意这里指的是 Pages 要发布哪个文件夹的内容，而不是指发布到目的仓库的什么位置；因为 hugo 默认生成静态网页到 public 文件夹，所以这里发布 public 文件夹里的内容。</span>
          <span class="token key atrule">publish_branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages	<span class="token comment"># 发布到哪个branch</span>
          <span class="token key atrule">force_orphan</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">full_commit_message</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.event.head_commit.message <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to GitHub Pages <span class="token comment"># 部署到另一个仓库的master分支</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4.2.2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">git-config-name</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>github<span class="token punctuation">-</span>username
          <span class="token key atrule">git-config-email</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>github<span class="token punctuation">-</span>email
          <span class="token key atrule">token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># target-folder: /</span>
          <span class="token key atrule">repository-name</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>github<span class="token punctuation">-</span>name/your<span class="token punctuation">-</span>github<span class="token punctuation">-</span>repo<span class="token punctuation">-</span>name
          <span class="token key atrule">ssh-key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DEPLOY_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
          <span class="token key atrule">folder</span><span class="token punctuation">:</span> ./publis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),r=s("code",null,"Deploy To Pages",-1),d=s("code",null,"Deploy to GitHub Pages",-1),k=s("br",null,null,-1),m=s("code",null,"ACCESS_TOKEN",-1),v=s("br",null,null,-1),h={href:"https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens",target:"_blank",rel:"noopener noreferrer"},b=a(`<p>一般来说，第二种方案保密性更好，第一种你的数据可能被他人拷贝或者克隆，此外github pages的个人域名也是可以绑定的，此处就不在赘述了。</p><h2 id="_2-2-在github配置" tabindex="-1"><a class="header-anchor" href="#_2-2-在github配置" aria-hidden="true">#</a> 2.2 在github配置</h2><p>在github创建一个新的仓库，然后将你的hugo-webstack项目推送到该仓库。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;first commit&quot;</span>
$ <span class="token function">git</span> remote <span class="token function">add</span> origin 你的github仓库地址
$ <span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-部署到vercel" tabindex="-1"><a class="header-anchor" href="#_3-部署到vercel" aria-hidden="true">#</a> 3.部署到vercel</h2><h3 id="_3-1-vercel部署" tabindex="-1"><a class="header-anchor" href="#_3-1-vercel部署" aria-hidden="true">#</a> 3.1 vercel部署</h3>`,6),g={href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"},y=s("code",null,"import project",-1),_=s("code",null,"deploy",-1),f=a('<h3 id="_3-2-vercel配置自定义域名" tabindex="-1"><a class="header-anchor" href="#_3-2-vercel配置自定义域名" aria-hidden="true">#</a> 3.2 vercel配置自定义域名</h3><p>在你部署完成后，打开该项目settings选项，找到domains选项，点击<code>add</code>添加自定义域名，然后在你的域名服务商那里添加一条cname记录，<br> cname记录的值为<code>你的vercel域名.vercel.com</code>，然后等待vercel为你生成ssl证书，一般来说，等待时间不会超过5分钟，然后你就可以通过你的域名访问你的个人导航工具了。</p><h3 id="_3-3-说明" tabindex="-1"><a class="header-anchor" href="#_3-3-说明" aria-hidden="true">#</a> 3.3 说明</h3><p>在vervel部署你的个人导航工具，你的仓库可以使私有的，当前github支持vercel application，只要你push你的配置到master(main)分支，vercel就会自动部署你的个人导航工具。</p>',4);function x(S,E){const e=o("ExternalLinkIcon");return i(),p("div",null,[u,s("p",null,[n("上述yml的任务步骤"),r,n("和"),d,n("两者选其一即可，前者是部署到当前仓库的其他分支，后者是部署到另一个仓库的master分支。"),k,n(" 部署到当前仓库的其他分支则你的当前仓库必须要公开，而第二种方案你的当前则不需要公开，但是需要在你的当前仓库设置一个"),m,n("，具体操作请查看："),v,s("a",h,[n("https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens"),t(e)])]),b,s("p",null,[n("打开velcel("),s("a",g,[n("https://vercel.com/dashboard"),t(e)]),n(")官网，如果你没有注册账号，那么请先注册一个账号，然后点击"),y,n("导入你的github仓库，然后点击"),_,n("即可。")]),f])}const T=c(l,[["render",x],["__file","hugu-nav.html.vue"]]);export{T as default};
